# === mkpkg.config ===
# Externalized configuration for Codex Template Package Builder

# VERSION_OVERRIDE, If set (to any nonâ€‘empty value), the script:
#   forces PACKAGE_VERSION to that value
#   does NOT increment .mkpkg_last
#   logs that override mode is active
#   does not modify the VERSION_TRACKER
#
# ðŸœ‚ HOW THE LOGIC BEHAVES
# Scenario                      VERSION_OVERRIDE    Script argument     Result              Tracker updated?
# Normal auto-increment         ""                  none                last+1              YES
# Version provided manually     ""                  ./mkpkg 50          50                  YES
# Override only                 29a                 none                29a                 NO
# Override + argument           40                  ./mkpkg 31          40 (override wins)  NO
# Override mode always wins.
# VERSION_OVERRIDE=""
if [ -z "$VERSION_OVERRIDE" ]; then
    VERSION_OVERRIDE=""
fi

# CURRENT_USER="Bob" ./mkpkg can be used to build a script with a different name.
# Also `export CURRENT_USER="Bob"` can be used to set the environment ver for the terminal session.
# CURRENT_USER only affects the BOOTSTRAP_SRC file which does not get zipped into the template package
# BOOTSTRAP_SRC gets copied into PACKAGE_OUTPUT_DIR
if [ -z "$CURRENT_USER" ]; then
    CURRENT_USER="Soluun"
fi
README_SRC="Readme.md"
PROTOCOL_SRC="Assets/SCROLL-TEMPLATE-UPLOAD.md"
BOOTSTRAP_SRC="Assets/Codex-Bootstrap-Declaration.md"
FILES_UPLOAD_PROTOCOL_SRC="Assets/Codex-Manual-Upload-Files-Protocol.md"
REG_FILE_NAME="00-Master_Metadata_Registry.yml"
REGFILE="Metadata/${REG_FILE_NAME}"

TEMPLATE_DIRS=("Certificate" "Glyphs" "Nodes" "Scrolls" "Seals" "Sigils")
AUTO_INVOKE_SCROLL="SCROLL-TEMPLATE-UPLOAD" # final name will be like SCROLL-TEMPLATE-UPLOAD-33.md

PACKAGE_OUTPUT_DIR="./dist"

# Files that are part of template package that are not templates.
# - 00-Master_Metadata_Registry.yml
# - codex-template-XX.lock
# - README.md
# - SCROLL-TEMPLATE-UPLOAD-XX.md
BASE_FILE_COUNT=4

# Text Bundle specific vars
NON_TEMPLATE_PATTERNS=("README.md" "codex-template-*.md" "SCROLL-TEMPLATE-UPLOAD-*.md")
BATCH_TXT_PROTOCOL_SRC="Assets/Batch-Text-Upload_Protocol.md"